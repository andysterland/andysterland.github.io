<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" /> 
    <title>Example of a simple page that's been minified</title>
    <style>html{font:12px sans-serif;margin:0;padding:0;overflow:hidden;background:white;color:red;}body{margin:0;padding:0;}.intro{font:2em sans-serif;margin:3.5em 2em;padding:0.5em;border:solid thin;background:white;color:black;position:relative;z-index:2;}.intro *{font:inherit;margin:0;padding:0;}.intro h1{font-size:1em;font-weight:bolder;margin:0;padding:0;}.intro :link{color:blue;}.intro :visited{color:purple;}#top{margin:100em 3em 0;padding:2em 0 0 .5em;text-align:left;font:2em/24px sans-serif;color:navy;white-space:pre;}.picture{position:relative;border:1em solid transparent;margin:0 0 100em 3em;}.picture{background:red;}.picture p{position:fixed;margin:0;padding:0;border:0;top:9em;left:11em;width:140%;max-width:4em;height:8px;min-height:1em;max-height:2mm;background:black;border-bottom:0.5em yellow solid;}.picture p.bad{border-bottom:red solid;}.picture p + p{background:maroon;z-index:1;}.picture p + table + p{margin-top:3em;}[class~=one].first.one{position:absolute;top:0;margin:36px 0 0 60px;padding:0;border:black 2em;border-style:none solid;}[class~=one][class~=first] [class=second\ two][class="second two"]{float:right;width:48px;height:12px;background:yellow;margin:0;padding:0;}.forehead{margin:4em;width:8em;border-left:solid black 1em;border-right:solid black 1em;background:red url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAIAAACQd1PeAAAADElEQVR42mP4%2F58BAAT%2FAf9jgNErAAAAAElFTkSuQmCC);}.forehead *{width:12em;line-height:1em;}.two.error.two{background:maroon;}.forehead.error.forehead{background:red;}[class=second two]{background:red;}.eyes{position:absolute;top:5em;left:3em;margin:0;padding:0;background:red;}#eyes-a{height:0;line-height:2em;text-align:right;}#eyes-a object{display:inline;vertical-align:bottom;}#eyes-a object[type]{width:7.5em;height:2.5em;}#eyes-a object object object{border-right:solid 1em black;padding:0 12px 0 11px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAIAAAACCAIAAAD91JpzAAAABnRSTlMAAAAAAABupgeRAAAABmJLR0QA%2FwD%2FAP%2BgvaeTAAAAEUlEQVR42mP4%2F58BCv7%2FZwAAHfAD%2FabwPj4AAAAASUVORK5CYII%3D) fixed 1px 0;}#eyes-b{float:left;width:10em;height:2em;background:fixed url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAIAAAACCAIAAAD91JpzAAAABnRSTlMAAAAAAABupgeRAAAABmJLR0QA%2FwD%2FAP%2BgvaeTAAAAEUlEQVR42mP4%2F58BCv7%2FZwAAHfAD%2FabwPj4AAAAASUVORK5CYII%3D);border-left:solid 1em black;border-right:solid 1em red;}#eyes-c{display:block;background:red;border-left:2em solid yellow;width:10em;height:2em;}.nose{float:left;margin:-2em 2em -1em;border:solid 1em black;border-top:0;min-height:80%;height:60%;max-height:3em;padding:0;width:12em;}.nose > div{padding:1em 1em 3em;height:0;background:yellow;}.nose div div{width:2em;height:2em;background:red;margin:auto;}.nose :hover div{border-color:blue;}.nose div:hover :before{border-bottom-color:inherit;}.nose div:hover :after{border-top-color:inherit;}.nose div div:before{display:block;border-style:none solid solid;border-color:red yellow black yellow;border-width:1em;content:'';height:0;}.nose div :after{display:block;border-style:solid solid none;border-color:black yellow red yellow;border-width:1em;content:'';height:0;}.empty{margin:6.25em;height:10%;}.empty div{margin:0 2em -6em 4em;}.smile{margin:5em 3em;clear:both;}.smile div{margin-top:0.25em;background:black;width:12em;height:2em;position:relative;bottom:-1em;}.smile div div{position:absolute;top:0;right:1em;width:auto;height:0;margin:0;border:yellow solid 1em;}.smile div div span{display:inline;margin:-1em 0 0 0;border:solid 1em transparent;border-style:none solid;float:right;background:black;height:1em;}.smile div div span em{float:inherit;border-top:solid yellow 1em;border-bottom:solid black 1em;}.smile div div span em strong{width:6em;display:block;margin-bottom:-1em;}.chin{margin:-4em 4em 0;width:8em;line-height:1em;border-left:solid 1em black;border-right:solid 1em black;background:yellow url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAIAAAFSDNYfAAAAaklEQVR42u3XQQrAIAwAQeP%2F%2F6wf8CJBJTK9lnQ7FpHGaOurt1I34nfH9pMMZAZ8BwMGEvvh%2BBsJCAgICLwIOA8EBAQEBAQEBAQEBK79H5RfIQAAAAAAAAAAAAAAAAAAAAAAAAAAAID%2FABMSqAfj%2FsLmvAAAAABJRU5ErkJggg%3D%3D)no-repeat fixed;}.chin div{display:inline;font:2px/4px serif;}.parser-container div{color:maroon;border:solid;color:orange;}div.parser-container *{border-color:black;}* div.parser{border-width:0 2em;}.parser{}.parser{margin:0 5em 1em;padding:0 1em;width:2em;height:1em;error:\};background:yellow;}* html .parser{background:gray;}\.parser{padding:2em;}.parser{m\argin:2em;};.parser{height:3em;}.parser{width:200;}.parser{border:5em solid red ! error;}.parser{background:red pink;}ul{display:table;padding:0;margin:-1em 7em 0;background:red;}ul li{padding:0;margin:0;}ul li.first-part{display:table-cell;height:1em;width:1em;background:black;}ul li.second-part{display:table;height:1em;width:1em;background:black;}ul li.third-part{display:table-cell;height:0.5em;width:1em;background:black;}ul li.fourth-part{list-style:none;height:1em;width:1em;background:black;}.image-height-test{height:10px;overflow:hidden;font:20em serif;}table{margin:0;border-spacing:0;}td{padding:0;}</style>
    <script>var Vector = (function () { function Vector(x, y, z) { this.x = x; this.y = y; this.z = z; } Vector.times = function (k, v) { return new Vector(k * v.x, k * v.y, k * v.z); }; Vector.minus = function (v1, v2) { return new Vector(v1.x - v2.x, v1.y - v2.y, v1.z - v2.z); }; Vector.plus = function (v1, v2) { return new Vector(v1.x + v2.x, v1.y + v2.y, v1.z + v2.z); }; Vector.dot = function (v1, v2) { return v1.x * v2.x + v1.y * v2.y + v1.z * v2.z; }; Vector.mag = function (v) { return Math.sqrt(v.x * v.x + v.y * v.y + v.z * v.z); }; Vector.norm = function (v) { var mag = Vector.mag(v); var div = (mag === 0) ? Infinity : 1.0 / mag; return Vector.times(div, v); }; Vector.cross = function (v1, v2) { return new Vector(v1.y * v2.z - v1.z * v2.y, v1.z * v2.x - v1.x * v2.z, v1.x * v2.y - v1.y * v2.x); }; return Vector; })(); var Color = (function () { function Color(r, g, b) { this.r = r; this.g = g; this.b = b; } Color.scale = function (k, v) { return new Color(k * v.r, k * v.g, k * v.b); }; Color.plus = function (v1, v2) { return new Color(v1.r + v2.r, v1.g + v2.g, v1.b + v2.b); }; Color.times = function (v1, v2) { return new Color(v1.r * v2.r, v1.g * v2.g, v1.b * v2.b); }; Color.toDrawingColor = function (c) { var legalize = function (d) { return d > 1 ? 1 : d; }; return { r: Math.floor(legalize(c.r) * 255), g: Math.floor(legalize(c.g) * 255), b: Math.floor(legalize(c.b) * 255) }; }; Color.white = new Color(1.0, 1.0, 1.0); Color.grey = new Color(0.5, 0.5, 0.5); Color.black = new Color(0.0, 0.0, 0.0); Color.background = Color.black; Color.defaultColor = Color.black; return Color; })(); var Camera = (function () { function Camera(pos, lookAt) { this.pos = pos; var down = new Vector(0.0, -1.0, 0.0); this.forward = Vector.norm(Vector.minus(lookAt, this.pos)); this.right = Vector.times(1.5, Vector.norm(Vector.cross(this.forward, down))); this.up = Vector.times(1.5, Vector.norm(Vector.cross(this.forward, this.right))); } return Camera; })(); var Sphere = (function () { function Sphere(center, radius, surface) { this.center = center; this.surface = surface; this.radius2 = radius * radius; } Sphere.prototype.normal = function (pos) { return Vector.norm(Vector.minus(pos, this.center)); }; Sphere.prototype.intersect = function (ray) { var eo = Vector.minus(this.center, ray.start); var v = Vector.dot(eo, ray.dir); var dist = 0; if (v >= 0) { var disc = this.radius2 - (Vector.dot(eo, eo) - v * v); if (disc >= 0) { dist = v - Math.sqrt(disc); } } if (dist === 0) { return null; } else { return { thing: this, ray: ray, dist: dist }; } }; return Sphere; })(); var Plane = (function () { function Plane(norm, offset, surface) { this.surface = surface; this.normal = function (pos) { return norm; }; this.intersect = function (ray) { var denom = Vector.dot(norm, ray.dir); if (denom > 0) { return null; } else { var dist = (Vector.dot(norm, ray.start) + offset) / (-denom); return { thing: this, ray: ray, dist: dist }; } }; } return Plane; })(); var Surfaces; (function (Surfaces) { Surfaces.shiny = { diffuse: function (pos) { return Color.white; }, specular: function (pos) { return Color.grey; }, reflect: function (pos) { return 0.7; }, roughness: 250 }; Surfaces.checkerboard = { diffuse: function (pos) { if ((Math.floor(pos.z) + Math.floor(pos.x)) % 2 !== 0) { return Color.white; } else { return Color.black; } }, specular: function (pos) { return Color.white; }, reflect: function (pos) { if ((Math.floor(pos.z) + Math.floor(pos.x)) % 2 !== 0) { return 0.1; } else { return 0.7; } }, roughness: 150 }; })(Surfaces || (Surfaces = {})); var RayTracer = (function () { function RayTracer() { this.maxDepth = 5; } RayTracer.prototype.intersections = function (ray, scene) { var closest = +Infinity; var closestInter = undefined; for (var i in scene.things) { var inter = scene.things[i].intersect(ray); if (inter != null && inter.dist < closest) { closestInter = inter; closest = inter.dist; } } return closestInter; }; RayTracer.prototype.testRay = function (ray, scene) { var isect = this.intersections(ray, scene); if (isect != null) { return isect.dist; } else { return undefined; } }; RayTracer.prototype.traceRay = function (ray, scene, depth) { var isect = this.intersections(ray, scene); if (isect === undefined) { return Color.background; } else { return this.shade(isect, scene, depth); } }; RayTracer.prototype.shade = function (isect, scene, depth) { var d = isect.ray.dir; var pos = Vector.plus(Vector.times(isect.dist, d), isect.ray.start); var normal = isect.thing.normal(pos); var reflectDir = Vector.minus(d, Vector.times(2, Vector.times(Vector.dot(normal, d), normal))); var naturalColor = Color.plus(Color.background, this.getNaturalColor(isect.thing, pos, normal, reflectDir, scene)); var reflectedColor = (depth >= this.maxDepth) ? Color.grey : this.getReflectionColor(isect.thing, pos, normal, reflectDir, scene, depth); return Color.plus(naturalColor, reflectedColor); }; RayTracer.prototype.getReflectionColor = function (thing, pos, normal, rd, scene, depth) { return Color.scale(thing.surface.reflect(pos), this.traceRay({ start: pos, dir: rd }, scene, depth + 1)); }; RayTracer.prototype.getNaturalColor = function (thing, pos, norm, rd, scene) { var _this = this; var addLight = function (col, light) { var ldis = Vector.minus(light.pos, pos); var livec = Vector.norm(ldis); var neatIsect = _this.testRay({ start: pos, dir: livec }, scene); var isInShadow = (neatIsect === undefined) ? false : (neatIsect <= Vector.mag(ldis)); if (isInShadow) { return col; } else { var illum = Vector.dot(livec, norm); var lcolor = (illum > 0) ? Color.scale(illum, light.color) : Color.defaultColor; var specular = Vector.dot(livec, Vector.norm(rd)); var scolor = (specular > 0) ? Color.scale(Math.pow(specular, thing.surface.roughness), light.color) : Color.defaultColor; return Color.plus(col, Color.plus(Color.times(thing.surface.diffuse(pos), lcolor), Color.times(thing.surface.specular(pos), scolor))); } }; return scene.lights.reduce(addLight, Color.defaultColor); }; RayTracer.prototype.render = function (scene, ctx, screenWidth, screenHeight) { var getPoint = function (x, y, camera) { var recenterX = function (x) { return (x - (screenWidth / 2.0)) / 2.0 / screenWidth; }; var recenterY = function (y) { return -(y - (screenHeight / 2.0)) / 2.0 / screenHeight; }; return Vector.norm(Vector.plus(camera.forward, Vector.plus(Vector.times(recenterX(x), camera.right), Vector.times(recenterY(y), camera.up)))); }; for (var y = 0; y < screenHeight; y++) { for (var x = 0; x < screenWidth; x++) { var color = this.traceRay({ start: scene.camera.pos, dir: getPoint(x, y, scene.camera) }, scene, 0); var c = Color.toDrawingColor(color); ctx.fillStyle = "rgb(" + String(c.r) + "," + String(c.g) + "," + String(c.b) + ")"; ctx.fillRect(x, y, x + 1, y + 1); } } }; return RayTracer; })(); function defaultScene() { return { things: [new Plane(new Vector(0.0, 1.0, 0.0), 0.0, Surfaces.checkerboard), new Sphere(new Vector(0.0, 1.0, -0.25), 1.0, Surfaces.shiny), new Sphere(new Vector(-1.0, 0.5, 1.5), 0.5, Surfaces.shiny)], lights: [{ pos: new Vector(-2.0, 2.5, 0.0), color: new Color(0.49, 0.07, 0.07) }, { pos: new Vector(1.5, 2.5, 1.5), color: new Color(0.07, 0.07, 0.49) }, { pos: new Vector(1.5, 2.5, -1.5), color: new Color(0.07, 0.49, 0.071) }, { pos: new Vector(0.0, 3.5, 0.0), color: new Color(0.21, 0.21, 0.35) }], camera: new Camera(new Vector(3.0, 2.0, 4.0), new Vector(-1.0, 0.5, 0.0)) }; } function exec() { var canv = document.createElement("canvas"); canv.width = 256; canv.height = 256; document.body.appendChild(canv); var ctx = canv.getContext("2d"); var rayTracer = new RayTracer(); return rayTracer.render(defaultScene(), ctx, 256, 256); } exec();</script>
</head>
<body>
    <div class="intro"><h1>Standards compliant?</h1><p><a href="#top">Take The Acid2 Test</a> and compare it to <a href="reference.html">the reference rendering</a>.</p></div><h2 id="top">Hello World!</h2><div class="picture"><p><table><tr><td></table><p class="bad"><!-- <table> closes <p> per the HTML4 DTD --><blockquote class="first one"><address class="second two"></address></blockquote><div class="forehead"><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div></div><div class="eyes"><div id="eyes-a"><object data="data:application/x-unknown,ERROR"><object data="http://www.damowmow.com/404/" type="text/html"><object data="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAAAYCAYAAAFy7sgCAAAGsUlEQVRo3u2ZbWwcZxHHf3s%2B7LNbO3ZjXBtowprGODRX0qpNQCjmJKuVKhMl1P2AkCwhFOIKkCBSm9IXavGFKAixIAECwkmWo5MrhRI3Ub40IEwQgp6aIDg3Cd6eEqyIHEteah%2B1E69vhw%2BZtTaX8704ZzkKjHS6271nZ56ZZ%2BY%2F%2F%2BdZKF%2FCwYshx3EkkggLsD1v4FQkEZZYLCbAKyG9%2Ba9EIsG6hnUAf8x74K3aUC3j4%2BM54HcsR2oAIomwZOezkv%2FnSHpYNh%2BNCmAE7xv94zvFdd1bHsjMZmQkPSxAJP%2B%2FfuBLwK54PC7JZFKAVJmzXLBt2w%2FMvcDLwIb8QS8CeJ4nkURYIomw7J%2FYJ8BvSiiXptGGxWds2%2Fa9%2Bnaxh%2BYAD%2Bgt04NDgABTpQY2cvvSFLzw86gWeBVwC8SzlOSv2YeBPfmDBoBHgKmR9LBEEmHZfDTqGykqfkUE0nA78BzQGfSgUeP3wNeTXwXg7MwZDhw4UHL6ra2ti79%2FOvljgG8AZ4H64Lhm4MvAocxsRppGG%2FxcXihlwLIs6R%2FfKV2HO%2F26uA94pdDYUKUZUU7W1RQYXA98Gnhaf5%2FXWX0HeAHYoQonqa4sZSOsSWMCWeC9Yko%2BCQwBe4E6oNc0Tc91XTl1%2BaTsn9gnI%2Blhyc5nZWxsrBIkKSbl2tiic3tW53YDEwOKaoFBrcOfqKee53lG9xsPMjV784r%2F4lO%2FpPvyJ9iyZcuvFSaXK5XYeAZ4CDgGvB3MS4B54LQuWYPeuy4iRFsevsXqpuYoqVQKIH2bK1CuDQNo11o4XUzh%2FcDWYIe1LEtyuZx4niee54njOGKapgfsqlL%2Bl2OjEXg8nxrc1dJ0h3hbtL%2BGCtz7KPBF4CuBe9uB15VafE8hr9qylI3HgG8C2%2FK7VyHZoJj7MrBRm30qFotJMpkU27YlHo%2F7Ha5a%2BV%2FKRkSJ4KuKRLVLKapTjB1SzAVIjY2NSXY%2BKyPpYdk%2FsU9OXT4pruv6BdZbBQfKsVGnvWlIe1VB6VQO8JxC1vZYLCbZ%2BaxsPhpdZDyRRFhG0sPiOE6ldKBg2lRg4xF1YCDIIIKN7DGgD3gH%2BBXwejKZfPrs2tPs%2FvPN2bKuYR1nd7xLKBSSJeqoXKnERjPwNWAG%2BLn2rZuM%2B4Tpml6vaWlp4eLcxVusZq5lCgVgOVKJjRqdX86ffL4D5wIoZACnTpw4wRMdT96i%2FImOJxERAs4uVyqxUacF%2FPdiCj%2BjdRBRGFtwXVdG0sPSdbhTmkYbpH98p2RmM2JZlig1vl0GWo4NQ%2Fn%2Bs5pKRXfwjweaxy7TND3HcRZbfC6X8xVPVQlGy7WxVWlO5XRXFXm6EZmrQuSXYyPE3SiVoEhE6Wyr0u2rumO6zv%2B21AFdQAswC1wCMuUCXCmyWQus103Qg8qlDO0lxwOb%2Fl4FiK3AB3VS%2FuKKLtK%2FgbeAnwG%2FvUODuRw%2FFrR0H1UC75fwu8oJ%2FhFsW5VIG%2FBUgEIN6Y65O4AHu4Ap0zQ9y7LEcZyb9lRBUHQcRyzL8unZVBW5bFWAvAp%2BhDQ2g4F47dUYtlU6obXA54DnVdFLekjUGGifh4AFy7LEdV3xj3X9I66m0QZpGm2QrsOd0j%2B%2BU0bSw5KZzYjrun6HWlAd961i4FfCj0aN1Usau%2Bc1lmuXPFwvAEumUut7tQQvAb%2FXb%2FT0bCAej9cODg7yt%2Bm%2F8q2%2F7OUHZ76PnZ1k2p0mJzlykmPancbOTnL0whHs7CQfb%2B5mx2d3sH79%2BtCRI0c6FeaOr9ICrIQfLvA%2B8BGNXxi4R6HrisJVUWrxAVW2oMFf0Aczim8o3kV6enowDIPjF9%2Fk%2BMU3S3rrjzMMg56eHr%2BxP7qKFbASfojG6kpeDGs1tiW53RxwWT%2Bin5q8w4xpQK5evQpAR30H7ZH2khNvj7TTUd8BgD4rqmu1ZKX8qNeY%2BfHz4zlXDgT5E8tpCTUq7XSBC4Euv8227TV9fX1E73%2BYtvo27BmbS9cvFVTY3bSRFza9yOcf6Gfmygy7d%2B%2Fm%2FPnzF4DvrsBLhnJlJfwIKXxv1PheAE4qK6p4H9AGbNKTuhngBPBPXYRe4IemaT5kWZbR19fHNbmGnZ1k4r3U4glDR30Hm5qjbGjsImJEOHbsGHv27JFz5869o0eFq01Jq%2BmHAXwI6FFKagMTgHM7GzFDS%2BoeLSMv7zjzC9x4Y7gxFovVDAwMEI1GaWlpWSzRVCrFwYMH%2FXfxZ4AfAa8B%2F7lDaGg1%2FQgp43lfK0yqtRMuJa3ceKe5DfgYsCYAZ2ngD8CfAkzqTpW7xY%2F%2FSznyX%2FVeUb2kVmX4AAAAAElFTkSuQmCC">ERROR</object></object></object></div><div id="eyes-b"></div><div id="eyes-c"></div></div> <!-- that's a PNG with 8bit alpha containing two eyes --><div class="nose"><div><div></div></div></div><div class="empty"><div></div></div><div class="smile"><div><div><span><em><strong></strong></em></span></div></div></div><div class="chin"><div>&nbsp;</div></div><div class="parser-container"><div class="parser"><!-- ->ERROR<!- --></div></div> <!-- two dashes is what delimits a comment,so the text "->ERROR<!-" earlier on this line is actually part of a comment --><ul><li class="first-part"></li><li class="second-part"></li><li class="third-part"></li><li class="fourth-part"></li></ul><div class="image-height-test"><table><tr><td><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAIAAAFSDNYfAAAAaklEQVR42u3XQQrAIAwAQeP%2F%2F6wf8CJBJTK9lnQ7FpHGaOurt1I34nfH9pMMZAZ8BwMGEvvh%2BBsJCAgICLwIOA8EBAQEBAQEBAQEBK79H5RfIQAAAAAAAAAAAAAAAAAAAAAAAAAAAID%2FABMSqAfj%2FsLmvAAAAABJRU5ErkJggg%3D%3D" alt=""></td></tr></table></div></div>
</body>
</html>